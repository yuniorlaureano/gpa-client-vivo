<div class="card">
  <div class="card-body">
    <div class="row">
      <div class="col-sm-12 col-12">
        <form [formGroup]="filterForm">
          <div class="row">
            <div class="col-sm-4 col-12">
              <label class="form-label" style="margin-bottom: 23px"></label>
              <div class="input-group">
                <span class="input-group-text"
                  ><i class="bi bi-search"></i
                ></span>
                <input
                  type="text"
                  class="form-control"
                  placeholder="Buscar por Código o Producto"
                  formControlName="term"
                  (input)="handleSearch()"
                  style="margin-right: 2px; width: 100px"
                />
              </div>
            </div>
            <div class="col-sm-3 col-12">
              <label class="form-label">Tipo</label>
              <select
                class="form-control"
                (change)="handleSearch()"
                formControlName="type"
              >
                <option value="-1">Todos</option>
                <option value="1">Producto terminado</option>
                <option value="2">Materia prima</option>
              </select>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div style="display: flex; justify-content: right">
    <button
      type="button"
      class="btn btn-outline-info mb-1"
      (click)="downloadExistenceAsExcel()"
      placement="top"
      ngbTooltip="Limpiar campos"
    >
      <i class="fa-solid fa-file-arrow-down"></i>
    </button>
  </div>
</div>
<!-- Row start -->
<div class="row">
  <div class="col-sm-12 col-12">
    <div class="card">
      <ngx-spinner
        name="table-spinner"
        [fullScreen]="false"
        type="timer"
        size="medium"
      ></ngx-spinner>
      <div class="table-responsive">
        <table class="table table-bordered m-0">
          <thead>
            <tr>
              <th>Código</th>
              <th>Producto</th>
              <th>Tipo</th>
              <th>Entrada</th>
              <th>Salida</th>
              <th>Existencia</th>
              <th>Monto en existencia</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of data.data">
              <td>{{ item.productCode }}</td>
              <td>{{ item.productName }}</td>
              <td>
                {{
                  item.productType == 1 ? "Producto terminado" : "Materia prima"
                }}
              </td>
              <td>{{ item.input }}</td>
              <td>{{ item.output }}</td>
              <td>{{ item.stock }}</td>
              <td>{{ item.price * item.stock | currency }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<!-- Row end -->
